<!DOCTYPE html>
<html>
<head>
  <title>LocalStorage Form Example</title>
</head>
<body>
  <h2>Add Person</h2>
  <form id="person-form">
    <input type="text" id="name" placeholder="Name" required>
    <input type="number" id="id" placeholder="ID" required>
    <button type="submit">Save</button>
  </form>

  <h3>Stored People:</h3>
  <ul id="people-list"></ul>

  <script>
    const form = document.getElementById("person-form");
    const nameInput = document.getElementById("name");
    const idInput = document.getElementById("id");
    const peopleList = document.getElementById("people-list");

    // Load existing data on page load
    document.addEventListener("DOMContentLoaded", displayPeople);

    form.addEventListener("submit", function (e) {
        e.preventDefault();

        const id = parseInt(idInput.value);
        const name = nameInput.value.trim();

        if (!name || isNaN(id)) return;

        let data = JSON.parse(localStorage.getItem("people")) || [];

        // Check if ID already exists and update
        const existingIndex = data.findIndex(p => p.id === id);

        if (existingIndex !== -1) {
            data[existingIndex].name = name;
        } else {
            data.push({ id, name });
        }

        localStorage.setItem("people", JSON.stringify(data));

        nameInput.value = "";
        idInput.value = "";
        displayPeople();
    });

    function displayPeople() {
        const data = JSON.parse(localStorage.getItem("people")) || [];
        peopleList.innerHTML = "";
        data.forEach(person => {
            const li = document.createElement("li");
            li.textContent = `ID: ${person.id}, Name: ${person.name}`;
            peopleList.appendChild(li);
        });
    }
  </script>
</body>
</html>
